<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/index1.css">

    <script type="text/javascript">
    function init(){
        var params = {
            //appID:"4a95d0b3"
            //appID:"905cb99d"
            appID:"202caf89"
        };
        var data = JSON.stringify(params);
        uexXunfei.init(data, function(error) {
            if(!error) {
                alert('uexXunfei.init success');
            } else {
                alert('uexXunfei.init fail');
            }
        });

    }

    function initSpeaker(){
        var params = {

        };
        var data = JSON.stringify(params);
        uexXunfei.initSpeaker(data);
    }

    function startSpeaking(){
        var params = {
            //text:"this is wuhan university of science and technology,college english test band four!"
            text:"今天天气怎么样"
        };
        var data = JSON.stringify(params);
        uexXunfei.startSpeaking(data);
    }
        
        function initWakeuper(){
            var params = {
                wakupEnginPath:"res://xunfei/ivw/202caf89.jet"
            };
            var data = JSON.stringify(params);
            uexXunfei.initWakeuper(data);
        }

        function startWakeuper(){
            var params = {
                //text:"this is wuhan university of science and technology,college english test band four!"
                text:""
            };
            var data = JSON.stringify(params);
            uexXunfei.startWakeuper(data);
        }
        function stopWakeuper(){
            var params = {
                //text:"this is wuhan university of science and technology,college english test band four!"
                text:""
            };
            var data = JSON.stringify(params);
            uexXunfei.stopWakeuper(data);
        }
        
        function startWakeuperOneshotLocal(){
            var params = {
                //text:"this is wuhan university of science and technology,college english test band four!"
                text:"",
                engineType:"local",
                asrJetPath:"res://xunfei/asr/common.jet",
            };
            var data = JSON.stringify(params);
            uexXunfei.startWakeuperOneshot(data);
        }

        function startWakeuperOneshotCloud(){
            var params = {
                //text:"this is wuhan university of science and technology,college english test band four!"
                text:""
            };
            var data = JSON.stringify(params);
            uexXunfei.startWakeuperOneshot(data);
        }
        function setWakeUpBuildGrammarLocal(){
            var params = {
                //text:"this is wuhan university of science and technology,college english test band four!"
                text:"",
                engineType:"local",
                asrJetPath:"res://xunfei/asr/common.jet",
                filePath:"res://xunfei/ivw/oneshot_local.bnf"
            };
            var data = JSON.stringify(params);
            uexXunfei.setWakeUpBuildGrammar(data);
        }
        function setWakeUpBuildGrammarCloud(){
            var params = {
                //text:"this is wuhan university of science and technology,college english test band four!"
                text:"",
                filePath:"res://xunfei/ivw/oneshot_cloud.abnf"
            };
            var data = JSON.stringify(params);
            uexXunfei.setWakeUpBuildGrammar(data);
        }
        

    function initRecognizer(){
        var params = {
        };
        var data = JSON.stringify(params);
        uexXunfei.initRecognizer(data);
    }

    function startListening(){
    /*
        var params = {
        };
        var data = JSON.stringify(params);
        uexXunfei.startListening(data);
        */
        var params = {
               };
        var data = JSON.stringify(params);
        uexXunfei.initRecognizer(data);
        uexXunfei.startListening(data);
    }



        function readLocalSouce(){
           var params = {
            filePath:"res://iattest.wav"
        };
        var data = JSON.stringify(params);

        uexXunfei.readLocalSouce(data);
        <!--uexXunfei.readLocalSouce("wgt://iattest.wav");-->
        <!--uexXunfei.readLocalSouce("wgts://iattest.wav");-->
        <!--uexXunfei.readLocalSouce("file:///sdcard/iattest.wav");-->

        }
        window.uexOnload = function(type){
            if(type == 0){
                uexXunfei.onSpeakComplete = onSpeakComplete;
                uexXunfei.onSpeakBegin = onSpeakBegin;
                uexXunfei.onSpeakPaused = onSpeakPaused;
                uexXunfei.onSpeakResumed = onSpeakResumed;
                uexXunfei.onRecognizeError = onRecognizeError;
                uexXunfei.onBeginOfSpeech = onBeginOfSpeech;
                uexXunfei.onEndOfSpeech = onEndOfSpeech;
                uexXunfei.onRecognizeResult = onRecognizeResult;
                //uexXunfei.onreadLocalSouceResult = onreadLocalSouceResult;
                uexXunfei.onWakeupOneshotResult = onWakeupOneshotResult;
                uexXunfei.onWakeupRecognizeResult = onWakeupRecognizeResult;
                uexXunfei.onWakeupResult = onWakeupResult;
                uexXunfei.onWakeupError = onWakeupError;
                uexXunfei.onSetWakeUpBuildGrammar = onSetWakeUpBuildGrammar;
            }
        }

        <!--function onreadLocalSouceResult(info){-->
        <!--alert(info);-->
        <!--}-->
        function cbInit(info){
           alert('cbInit: '+info);
       }
        function onSetWakeUpBuildGrammar(info){
            alert('onSetWakeUpBuildGrammar: '+info);
        }
        function onWakeupOneshotResult(info){
            alert('onWakeupOneshotResult: '+info);
        }
        function onWakeupResult(info){
            alert('onWakeupResult: '+info);
        }
        function onWakeupError(info){
            alert('onWakeupError: '+info);
        }
       function onSpeakComplete(info){
           alert('onSpeakComplete: '+info);
       }

       function onSpeakBegin(info){
           alert('onSpeakBegin: '+info);
       }

       function onSpeakPaused(info){
           alert('onSpeakPaused: '+info);
       }

       function onSpeakResumed(info){
           alert('onSpeakResumed: '+info);
       }
       function onRecognizeError(info){
           alert('onRecognizeError: '+info);
       }

       function onBeginOfSpeech(info){
           alert('onBeginOfSpeech: '+info);
       }

       function onEndOfSpeech(info){
           alert('onEndOfSpeech: '+info);
           content = '';
       }
       var content = '';
       function onRecognizeResult(info){
           alert('onRecognizeResult:'+info);
           var data = JSON.parse(info);
           var infoArr = data.ws;
           var isLast = data.ls;
           for (var i=0,len=infoArr.length; i<len; i++)
           {
               var text = infoArr[i].cw[0].w;
               content += text;
           }
           if(isLast){
              alert(content);
           }
        }

        function onWakeupRecognizeResult(info){
           alert('onWakeupRecognizeResult:'+info);
           var wakeupRecognizeContent = ""
           var data = JSON.parse(info);
           var infoArr = data.ws;
           var isLast = data.ls;
           for (var i=0,len=infoArr.length; i<len; i++)
           {
               var text = infoArr[i].cw[0].w;
               wakeupRecognizeContent += text;
           }
           if(isLast){
              alert('onWakeupRecognizeResult end:' + wakeupRecognizeContent);
           }
        }

    </script>
</head>

<body>
<div class="tit">uexXunfei</div>
<div class="conbor">
    <div class="consj">
        <input class='btn' type='button' value='init' onclick='init()'>

        <input class='btn' type='button' value='initSpeaker' onclick='initSpeaker()'>

        <input class='btn' type='button' value='startSpeaking' onclick='startSpeaking()'>

        <input class='btn' type='button' value='initRecognizer' onclick='initRecognizer()'>

        <input class='btn' type='button' value='startListening' onclick='startListening()'>
        <input class='btn' type='button' value='readLocalSouce' onclick='readLocalSouce()'>
        <input class='btn' type='button' value='initWakeuper' onclick='initWakeuper()'>
        <input class='btn' type='button' value='startWakeuper' onclick='startWakeuper()'>
        <input class='btn' type='button' value='stopWakeuper' onclick='stopWakeuper()'>
        <input class='btn' type='button' value='startWakeuperOneshot_CLOUD' onclick='startWakeuperOneshotCloud()'>
        <input class='btn' type='button' value='startWakeuperOneshot_LOCAL' onclick='startWakeuperOneshotLocal()'>
        <input class='btn' type='button' value='setWakeUpBuildGrammar_CLOUD' onclick='setWakeUpBuildGrammarCloud()'>
        <input class='btn' type='button' value='setWakeUpBuildGrammar_LOCAL' onclick='setWakeUpBuildGrammarLocal()'>

            


    </div>
</div>
</body>
</html>
